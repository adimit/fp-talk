<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Funktionale Programmierung in Kotlin mit Œõrrow</title>
<meta name="author" content="(Aleksandar Dimitrov)"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@3.8.0/css/reveal.css"/>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@3.8.0/css/theme/black.css" id="theme"/>


<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'https://cdn.jsdelivr.net/npm/reveal.js@3.8.0/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h1 class="title">Funktionale Programmierung in Kotlin mit Œõrrow</h1><h2 class="author">Aleksandar Dimitrov</h2><p class="date">Created: 2019-09-03 Di 18:26</p>
</section>

<section>
<section id="slide-org3c6dde5">
<h2 id="org3c6dde5">√úber mich</h2>
<ul>
<li>Computerlinguist by Education</li>

<li>itdesigner seit 6 Monaten</li>

</ul>

<p>
<code>@adimit</code>
</p>

<p>
<img src="./Gitlab.png" alt="Gitlab.png" /> <img src="./Github.png" alt="Github.png" /> <img src="./Twitter.png" alt="Twitter.png" />
</p>

</section>
<section id="slide-org7a61a37">
<h3 id="org7a61a37">üåû</h3>
<p>
<img src="./java.png" alt="java.png" /> <img src="./kotlin.png" alt="kotlin.png" /> <img src="./typescript.png" alt="typescript.png" />
</p>

</section>
<section id="slide-orgc758f13">
<h3 id="orgc758f13">üåö</h3>
<p>
<img src="./rust.png" alt="rust.png" /> <img src="./haskell.png" alt="haskell.png" />
</p>

<p>
(((())))
</p>

</section>
</section>
<section>
<section id="slide-org5cfb606">
<h2 id="org5cfb606">Einf√ºhrung</h2>
<ul>
<li>Funktionale Programme im <code>$JOB</code> bei <code>$CORP</code>?</li>
<li>Management muss Technologien absegnen</li>
<li>Neue Mitarbeiter einlernen?</li>
<li>Interop mit bestehenden Systemen?</li>
<li>Code-Qualit√§t?</li>

</ul>
</section>
<section id="slide-org1fc3d9e">
<h3 id="org1fc3d9e">Type Systems</h3>
<p>
Was macht ein Typensystem?
</p>

<ul>
<li><i>Schlechte</i> Programme ablehnen</li>
<li><i>Gute</i> Programme annehmen</li>

</ul>

<p>
Memory-Safety: ein typengechecktes Programm soll <b>nicht</b> durch
Speicherkorruption abst√ºrzen k√∂nnen.
</p>

<p>
Aber: es soll Programmierung nicht in ihrer Kreativit√§t einschr√§nken
</p>

</section>
<section id="slide-org2107c80">
<h3 id="org2107c80">Typensysteme als Ger√ºst</h3>
<p>
Typensysteme k√∂nnen bei der Architektur eines Programms helfen:
</p>

<ul>
<li>Verdeutlichung/Externalisierung des Datenflusses</li>
<li>Schnelle Interface-Prototypen ohne Implementierung</li>
<li>Dokumentation</li>
<li>Codierung eines Teils der Business-Logik</li>

</ul>

</section>
</section>
<section>
<section id="slide-orgc36793e">
<h2 id="orgc36793e">Overview</h2>
<ul>
<li>Kotlin</li>
<li>Etwas Theorie</li>
<li>Œõrrow Basics</li>
<li>Typenklassen in Kotlin</li>
<li>Beispiel</li>

</ul>
</section>
</section>
<section>
<section id="slide-org65fbb06">
<h2 id="org65fbb06">Kotlin</h2>
<ul>
<li>Entwickelt durch JetBrains (of IDE fame)</li>
<li>L√§uft auf JVM, super Java-Interop</li>
<li>Sponsored by Google
<ul>
<li>1st Class Android-Support</li>

</ul></li>
<li>Entwickelt in 2010-2012
<ul>
<li>Scala war zwar toll, aber der Compiler war ihnen zu lahm üê¢</li>

</ul></li>

</ul>
</section>
<section id="slide-org263c5c9">
<h3 id="org263c5c9">Warum Kotlin?</h3>
<ul>
<li>Wenn Euer Team sich vor Scala &amp; Clojure f√ºrchtet‚Ä¶</li>
<li>‚Ä¶ aber Java schon zu abgestanden schmeckt</li>
<li>Onboarding von Java-Kollegen zu Kotlin: problemlos</li>
<li>Kotlin unterst√ºtzt FP syntaktisch besser als Java</li>

</ul>
</section>
<section id="slide-org12489b6">
<h3 id="org12489b6">Features</h3>
<ul>
<li>Kompiliert schnell üêá</li>
<li>1st class IDE support</li>
<li>Einfache Value-Types (data classes)</li>
<li>Variablendeklaration mit <code>val</code> (reference immutability)</li>

</ul>

<div class="org-src-container">

<pre  class="src src-kotlin"><code trim><span style="color: #8ac6f2; font-weight: bold;">data</span> <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Customer</span>(
        <span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">name</span>: <span style="color: #92a65e; font-weight: bold;">String</span>,
        <span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">email</span>: <span style="color: #92a65e; font-weight: bold;">String</span>,
        <span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">company</span>: <span style="color: #92a65e; font-weight: bold;">String</span>)
</code></pre>
</div>
</section>
<section id="slide-orgaae515c">
<h3 id="orgaae515c">Erste Klasse</h3>
<ul>
<li>1st class Funktionen h√∂herer Ordnung</li>

</ul>

<div class="org-src-container">

<pre  class="src src-kotlin"><code trim><span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">positiveNumbers</span> = list.filter { it &gt; 0 }

<span style="color: #99968b;">// </span><span style="color: #99968b;">list.filter({element -&gt; element &gt; 0})</span>
</code></pre>
</div>

<div class="org-src-container">

<pre  class="src src-kotlin"><code trim>strings.filter { it.length == 5 }
       .sortedBy { it }
       .map { it.toUpperCase() }
</code></pre>
</div>

</section>
<section id="slide-org004eb94">
<h3 id="org004eb94">Rudiment√§res Pattern-Matching</h3>
<ul>
<li>Variablen k√∂nnen nach ihren Konstituenten dekonstruiert werden</li>

</ul>

<div class="org-src-container">

<pre  class="src src-kotlin"><code trim><span style="color: #8ac6f2; font-weight: bold;">data</span> <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Person</span>(<span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">age</span>: <span style="color: #92a65e; font-weight: bold;">Number</span>, <span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">name</span>: <span style="color: #92a65e; font-weight: bold;">String</span>);

<span style="color: #8ac6f2; font-weight: bold;">fun</span> <span style="color: #cae682;">printPerson</span>(a: <span style="color: #92a65e; font-weight: bold;">Person</span>) {
    <span style="color: #8ac6f2; font-weight: bold;">val</span> (age, name) = a

    println(<span style="color: #95e454;">"Meet </span><span style="color: #cae682;">${name}</span><span style="color: #95e454;">, </span><span style="color: #cae682;">${age}</span><span style="color: #95e454;"> years old."</span>)
}
</code></pre>
</div>

</section>
<section id="slide-org1653e40">
<h3 id="org1653e40">Wirklich Pattern-Matching?</h3>
<p>
In Wahrheit, ein schmutziger Trick:
</p>


<div class="figure">
<p><img src="./trick.png" alt="trick.png" />
</p>
</div>

</section>
<section id="slide-org4352c1c">
<h3 id="org4352c1c">Extension Functions</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"><code trim><span style="color: #8ac6f2; font-weight: bold;">fun</span> &lt;<span style="color: #92a65e; font-weight: bold;">T&gt;</span> <span style="color: #92a65e; font-weight: bold;">MutableList&lt;T&gt;.swap</span>(i: <span style="color: #92a65e; font-weight: bold;">Int</span>, j: <span style="color: #92a65e; font-weight: bold;">Int</span>) {
    <span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">tmp</span> = <span style="color: #8ac6f2; font-weight: bold;">this</span>[i] <span style="color: #99968b;">// </span><span style="color: #99968b;">'this' corresponds to the list</span>
    <span style="color: #8ac6f2; font-weight: bold;">this</span>[i] = <span style="color: #8ac6f2; font-weight: bold;">this</span>[j]
    <span style="color: #8ac6f2; font-weight: bold;">this</span>[j] = tmp
}

<span style="color: #99968b;">// </span><span style="color: #99968b;">&#8230;</span>

<span style="color: #8ac6f2; font-weight: bold;">fun</span> &lt;<span style="color: #92a65e; font-weight: bold;">T&gt;</span> foo(list: <span style="color: #92a65e; font-weight: bold;">MutableList&lt;T&gt;</span>) {
    list.swap(0, 1)
}
</code></pre>
</div>

</section>
<section id="slide-org4d6e3e1">
<h3 id="org4d6e3e1">"Nur" syntaktischer Zucker</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"><code trim><span style="color: #8ac6f2; font-weight: bold;">fun</span> &lt;<span style="color: #92a65e; font-weight: bold;">T&gt;</span> swap(me: <span style="color: #92a65e; font-weight: bold;">MutableList&lt;T&gt;</span>, i: <span style="color: #92a65e; font-weight: bold;">Int</span>, j: <span style="color: #92a65e; font-weight: bold;">Int</span>) {
    <span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">tmp</span> = me[i]
    me[i] = me[j]
    me[j] = tmp
}
</code></pre>
</div>

</section>
<section id="slide-orgf170af5">
<h3 id="orgf170af5">Tail Call Recursion</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"><code trim>sealed <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">L&lt;out</span> <span style="color: #92a65e; font-weight: bold;">T&gt;</span> {
    <span style="color: #8ac6f2; font-weight: bold;">object</span> <span style="color: #92a65e; font-weight: bold;">Empty</span>: <span style="color: #92a65e; font-weight: bold;">L&lt;Nothing&gt;</span>()
    <span style="color: #8ac6f2; font-weight: bold;">data</span> <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Cons&lt;T&gt;</span>(<span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">h</span>: <span style="color: #92a65e; font-weight: bold;">T</span>): <span style="color: #92a65e; font-weight: bold;">L&lt;T&gt;</span>()
}

<span style="color: #8ac6f2; font-weight: bold;">fun</span> <span style="color: #92a65e; font-weight: bold;">L&lt;Int&gt;.sum</span>(): <span style="color: #92a65e; font-weight: bold;">Int</span> = add(0)

<span style="color: #8ac6f2; font-weight: bold;">private</span> tailrec <span style="color: #8ac6f2; font-weight: bold;">fun</span> <span style="color: #92a65e; font-weight: bold;">L&lt;Int&gt;.add</span>(n0: <span style="color: #92a65e; font-weight: bold;">Int</span>): <span style="color: #92a65e; font-weight: bold;">Int</span> = <span style="color: #8ac6f2; font-weight: bold;">when</span> (<span style="color: #8ac6f2; font-weight: bold;">this</span>) {
    <span style="color: #8ac6f2; font-weight: bold;">is</span> <span style="color: #92a65e; font-weight: bold;">L.Empty</span> -&gt; n0
    <span style="color: #8ac6f2; font-weight: bold;">is</span> <span style="color: #92a65e; font-weight: bold;">L.Cons</span> -&gt; <span style="color: #8ac6f2; font-weight: bold;">this</span>.add(<span style="color: #8ac6f2; font-weight: bold;">this</span>.h)
}
</code></pre>
</div>
</section>
<section id="slide-orgcbeecb5">
<h3 id="orgcbeecb5">FP in Kotlin?</h3>
<ul>
<li>Funktionen sind niemals garantiert referentiell transparent</li>
<li><code>var</code>-Zuweisung</li>
<li><code>val</code>-Zuweisung funktioniert wie <code>final</code> in Java</li>
<li>das Typensystem wird uns etwas Kopfzerbrechen bereiten‚Ä¶</li>
<li>aber Œõrrow hilft</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgac01e2d">
<h2 id="orgac01e2d">Etwas Theorie</h2>
<div class="outline-text-2" id="text-orgac01e2d">
</div>
</section>
<section id="slide-orgabed925">
<h3 id="orgabed925">Was ist ein Typ?</h3>
<p>
Typen kann man als <b>Mengen von Werten</b> betrachten
</p>
<ul>
<li><code>Int</code></li>

</ul>
<p>
\[\{ x | x \in \mathcal{N} \} = \{ 1, 2, 3, \ldots\}\]
</p>

</section>
<section id="slide-orgd407434">
<h3 id="orgd407434">Bewohner eines Typen</h3>
<ul>
<li><code>enum class Colour { red, green }</code></li>

</ul>
<p>
\[  \{ \mathrm{red}, \mathrm{green} \} \]
</p>

<ul>
<li>Man spricht von <b>Bewohnern eines Typen</b> (Type inhabitation)</li>

</ul>

</section>
<section id="slide-orgc669f4f">
<h3 id="orgc669f4f">Spezielle Typen in Kotlin:</h3>
<ul>
<li><code>Any</code> wird von <i>allen Werten</i> bewohnt</li>
<li><code>Nothing</code> wird von <i>keinem Wert</i> bewohnt</li>
<li><code>Unit</code> hat genau einen Bewohner: <code>Unit</code></li>

</ul>
</section>
<section id="slide-org410b053">
<h3 id="org410b053">Algebraische Datentypen</h3>
<p>
Ein <b>Algebraischer Datentyp</b> ist eine Komposition aus anderen Typen.
</p>

</section>
<section id="slide-org7d31729">
<h3 id="org7d31729">Produkttypen</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"><code trim><span style="color: #8ac6f2; font-weight: bold;">data</span> <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Triple&lt;A</span>, <span style="color: #92a65e; font-weight: bold;">B</span>, <span style="color: #92a65e; font-weight: bold;">C&gt;</span>(<span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">a</span>: <span style="color: #92a65e; font-weight: bold;">A</span>, <span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">b</span>: <span style="color: #92a65e; font-weight: bold;">B</span>, c: <span style="color: #92a65e; font-weight: bold;">C</span>)
</code></pre>
</div>
<ul>
<li>Die <i>Anzahl an Bewohnern</i> dieses Typen ist <b>das Produkt</b> der Bewohnerzahl
der Typen, aus denen er besteht</li>

</ul>

</section>
<section id="slide-org2c69a21">
<h3 id="org2c69a21">Summentypen</h3>
<p>
Inheritance l√§sst sich in Kotlin beschr√§nken.
</p>

<div class="org-src-container">

<pre  class="src src-kotlin"><code trim>sealed <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Tree&lt;T&gt;</span> {
  <span style="color: #8ac6f2; font-weight: bold;">data</span> <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Leaf&lt;T&gt;</span>(<span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">t</span>: <span style="color: #92a65e; font-weight: bold;">T</span>): <span style="color: #92a65e; font-weight: bold;">Tree&lt;T&gt;</span>()
  <span style="color: #8ac6f2; font-weight: bold;">data</span> <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Branch&lt;T&gt;</span>(
          <span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">l</span>: <span style="color: #92a65e; font-weight: bold;">Tree&lt;T&gt;</span>,
          <span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">r</span>: <span style="color: #92a65e; font-weight: bold;">Tree&lt;T&gt;</span>
  ): <span style="color: #92a65e; font-weight: bold;">Tree&lt;T&gt;</span>()
}
</code></pre>
</div>
</section>
<section id="slide-orgfe11ff4">
<h3 id="orgfe11ff4">"Pattern Matching"</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"><code trim><span style="color: #8ac6f2; font-weight: bold;">fun</span> &lt;<span style="color: #92a65e; font-weight: bold;">T&gt;</span> traverse(t: <span style="color: #92a65e; font-weight: bold;">Tree&lt;T&gt;</span>): <span style="color: #92a65e; font-weight: bold;">List&lt;T&gt;</span> {
    <span style="color: #8ac6f2; font-weight: bold;">return</span> <span style="color: #8ac6f2; font-weight: bold;">when</span> (t) {
        <span style="color: #8ac6f2; font-weight: bold;">is</span> <span style="color: #92a65e; font-weight: bold;">Tree.Leaf</span> -&gt; listOf(t.t)
        <span style="color: #8ac6f2; font-weight: bold;">is</span> <span style="color: #92a65e; font-weight: bold;">Tree.Branch</span> -&gt; traverse(t.l) + traverse(t.r)
    }
}
</code></pre>
</div>
</section>
<section id="slide-org4af4b61">
<h3 id="org4af4b61">Œª-Kalk√ºl: Abstraktion</h3>
<p>
\[ f = 42 + (27 * 42) \]
\[ f' = \lambda x. x + (27 * x) \]
\[ f'' = \lambda x. \lambda y. x + (y * x) \]
</p>

</section>
<section id="slide-orga7d3a14">
<h3 id="orga7d3a14">Œª-Kalk√ºl: Konversion</h3>
<p>
\[ f''(12) = \lambda y. 12 + (y * 12) \]
\[ f''(12)(2) = 12 + (2 * 12) = 36\]
</p>
</section>
<section id="slide-org1151d86">
<h3 id="org1151d86">Type Functions</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"><code trim><span style="color: #8ac6f2; font-weight: bold;">fun</span> &lt;<span style="color: #92a65e; font-weight: bold;">A</span>, <span style="color: #92a65e; font-weight: bold;">B</span>, <span style="color: #92a65e; font-weight: bold;">C&gt;</span> ((<span style="color: #92a65e; font-weight: bold;">B</span>) -&gt; <span style="color: #92a65e; font-weight: bold;">C</span>)
        .compose(f: (<span style="color: #92a65e; font-weight: bold;">A</span>) -&gt; <span style="color: #92a65e; font-weight: bold;">B</span>): (<span style="color: #92a65e; font-weight: bold;">A</span>) -&gt; <span style="color: #92a65e; font-weight: bold;">C</span> = { <span style="color: #8ac6f2; font-weight: bold;">this</span>(f(it)) }

<span style="color: #8ac6f2; font-weight: bold;">fun</span> <span style="color: #92a65e; font-weight: bold;">List&lt;Int&gt;.sum</span>(): <span style="color: #92a65e; font-weight: bold;">Int</span> = <span style="color: #92a65e; font-weight: bold;">TODO</span>()
<span style="color: #8ac6f2; font-weight: bold;">fun</span> <span style="color: #92a65e; font-weight: bold;">List&lt;String&gt;.parse</span>(): <span style="color: #92a65e; font-weight: bold;">List&lt;Int&gt;</span> = <span style="color: #92a65e; font-weight: bold;">TODO</span>()

<span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">parseAndSum</span> = <span style="color: #92a65e; font-weight: bold;">List&lt;Int&gt;</span>::sum
    .compose&lt;<span style="color: #92a65e; font-weight: bold;">List&lt;String&gt;</span>, <span style="color: #92a65e; font-weight: bold;">List&lt;Int&gt;</span>, <span style="color: #92a65e; font-weight: bold;">Int&gt;</span>(
        <span style="color: #92a65e; font-weight: bold;">List&lt;String&gt;</span>::parse)

<span style="color: #99968b;">// </span><span style="color: #99968b;">(&#955;A.B.C. ((B) -&gt; C).compose(f: (A) -&gt; B): (A) -&gt; C)</span>
<span style="color: #99968b;">//                      </span><span style="color: #99968b;">(List&lt;String&gt;) (List&lt;Int&gt;) (Int)</span>

<span style="color: #99968b;">// </span><span style="color: #99968b;">((List&lt;String&gt;) -&gt; List&lt;Int&gt;)</span>
<span style="color: #99968b;">//  </span><span style="color: #99968b;">.compose(f: (List&lt;Int&gt;) -&gt; Int): (List&lt;String&gt;) -&gt; Int</span>
</code></pre>
</div>
</section>
<section id="slide-org3e62741">
<h3 id="org3e62741">Typen und Arten</h3>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Type</th>
<th scope="col" class="org-left">Kind</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>Int</code>, <code>String</code>, <code>Object</code></td>
<td class="org-left"><code>*</code></td>
</tr>

<tr>
<td class="org-left">List&lt;A&gt;, Maybe&lt;A&gt;</td>
<td class="org-left"><code>* ‚Üí *</code></td>
</tr>

<tr>
<td class="org-left">List&lt;Int&gt;, Maybe&lt;Object&gt;</td>
<td class="org-left"><code>*</code></td>
</tr>

<tr>
<td class="org-left">List&lt;Maybe&lt;T&gt;&gt;</td>
<td class="org-left"><code>* ‚Üí *</code></td>
</tr>
</tbody>
</table>
</section>
<section id="slide-orgc53791e">
<h3 id="orgc53791e">Aufgabe:</h3>
<ul class="fragment roll-in">
<li><code>fun ŒªF.A.B. F&lt;A&gt; ‚Üí ((A) ‚Üí B) ‚Üí F&lt;B&gt;</code></li>
<li>Kind von <code>A</code>, <code>B</code>?</li>
<li>Kind von <code>F</code>?</li>

</ul>

<ul class="fragment roll-in">
<li><code>(* ‚Üí *)</code></li>
<li>Nach welcher Funktion sieht es aus?</li>

</ul>

<ul class="fragment roll-in">
<li><code>map</code>!</li>
<li>Das Kind der Signatur der Funktion?</li>

</ul>

<ul class="fragment roll-in">
<li><code>(* ‚Üí *) ‚Üí * ‚Üí * -&gt; *</code></li>

</ul>

</section>
</section>
<section>
<section id="slide-org1a8c6e9">
<h2 id="org1a8c6e9">Œõrrow-kt Basics</h2>
<div class="outline-text-2" id="text-org1a8c6e9">
</div>
</section>
<section id="slide-org964489e">
<h3 id="org964489e">Ein Problem</h3>
<p>
Erlaubt einfache Manipulation verschachtelter Value Types
</p>
<div class="org-src-container">

<pre  class="src src-kotlin"><code trim><span style="color: #8ac6f2; font-weight: bold;">data</span> <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Street</span>(<span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">number</span>: <span style="color: #92a65e; font-weight: bold;">Int</span>, <span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">name</span>: <span style="color: #92a65e; font-weight: bold;">String</span>)
<span style="color: #8ac6f2; font-weight: bold;">data</span> <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Address</span>(<span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">city</span>: <span style="color: #92a65e; font-weight: bold;">String</span>, <span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">street</span>: <span style="color: #92a65e; font-weight: bold;">Street</span>)
<span style="color: #8ac6f2; font-weight: bold;">data</span> <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Company</span>(<span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">name</span>: <span style="color: #92a65e; font-weight: bold;">String</span>, <span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">address</span>: <span style="color: #92a65e; font-weight: bold;">Address</span>)
<span style="color: #8ac6f2; font-weight: bold;">data</span> <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Employee</span>(<span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">name</span>: <span style="color: #92a65e; font-weight: bold;">String</span>, <span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">company</span>: <span style="color: #92a65e; font-weight: bold;">Company?</span>)
</code></pre>
</div>
</section>
<section id="slide-org595f200">
<h3 id="org595f200">Œõrrow f√ºr mehr Durchblick!</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"><code trim>@optics <span style="color: #8ac6f2; font-weight: bold;">data</span> <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Street</span>(
    <span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">number</span>: <span style="color: #92a65e; font-weight: bold;">Int</span>, <span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">name</span>: <span style="color: #92a65e; font-weight: bold;">String</span>) {<span style="color: #8ac6f2; font-weight: bold;">companion</span> <span style="color: #8ac6f2; font-weight: bold;">object</span>}
@optics <span style="color: #8ac6f2; font-weight: bold;">data</span> <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Address</span>(
    <span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">city</span>: <span style="color: #92a65e; font-weight: bold;">String</span>, <span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">street</span>: <span style="color: #92a65e; font-weight: bold;">Street</span>) {<span style="color: #8ac6f2; font-weight: bold;">companion</span> <span style="color: #8ac6f2; font-weight: bold;">object</span>}
@optics <span style="color: #8ac6f2; font-weight: bold;">data</span> <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Company</span>(
    <span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">name</span>: <span style="color: #92a65e; font-weight: bold;">String</span>, <span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">address</span>: <span style="color: #92a65e; font-weight: bold;">Address</span>) {<span style="color: #8ac6f2; font-weight: bold;">companion</span> <span style="color: #8ac6f2; font-weight: bold;">object</span>}
@optics <span style="color: #8ac6f2; font-weight: bold;">data</span> <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Employee</span>(
    <span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">name</span>: <span style="color: #92a65e; font-weight: bold;">String</span>, <span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">company</span>: <span style="color: #92a65e; font-weight: bold;">Company?</span>) {<span style="color: #8ac6f2; font-weight: bold;">companion</span> <span style="color: #8ac6f2; font-weight: bold;">object</span>}

<span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">e</span> : <span style="color: #92a65e; font-weight: bold;">Employee</span> = <span style="color: #92a65e; font-weight: bold;">TODO</span>()
<span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">f</span> = <span style="color: #92a65e; font-weight: bold;">Employee.company.address.street.name.modify</span>(e)
    { <span style="color: #95e454;">"</span><span style="color: #cae682;">$it</span><span style="color: #95e454;">-Str"</span> }
</code></pre>
</div>

</section>
<section id="slide-orgf084e81">
<h3 id="orgf084e81">Data types</h3>
<p>
Operationen auf Datentypen manipulieren nur den Datentyp selbst, nicht sein generisches Argument
</p>

<p class="fragment roll-in">
<code>Option</code>, <code>Either</code>, &#x2026;
</p>
</section>
<section id="slide-org752ef47">
<h3 id="org752ef47">Either f√ºr Exceptions</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"><code trim>sealed <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Try&lt;out</span> <span style="color: #92a65e; font-weight: bold;">T&gt;</span> {
   <span style="color: #8ac6f2; font-weight: bold;">data</span> <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Failure</span>(<span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">e</span>: <span style="color: #92a65e; font-weight: bold;">Throwable</span>) : <span style="color: #92a65e; font-weight: bold;">Try&lt;Nothing&gt;</span>()
   <span style="color: #8ac6f2; font-weight: bold;">data</span> <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Success</span>(<span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">v</span>: <span style="color: #92a65e; font-weight: bold;">T</span>) :<span style="color: #92a65e; font-weight: bold;">Try&lt;T&gt;</span>()

   <span style="color: #99968b;">//</span><span style="color: #99968b;">...</span>
}

<span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">dangerous</span> = { throwsAnException() }.try_()
<span style="color: #99968b;">// </span><span style="color: #99968b;">dangerous = Failure(e=...)</span>
</code></pre>
</div>
</section>
<section id="slide-org1ea7ed4">
<h3 id="org1ea7ed4">Validierung</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"><code trim>sealed <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Validated&lt;out</span> <span style="color: #92a65e; font-weight: bold;">E</span>, <span style="color: #8ac6f2; font-weight: bold;">out</span> <span style="color: #92a65e; font-weight: bold;">A&gt;</span> {
    <span style="color: #8ac6f2; font-weight: bold;">data</span> <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Valid&lt;out</span> <span style="color: #92a65e; font-weight: bold;">A&gt;</span>(<span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">a</span>: <span style="color: #92a65e; font-weight: bold;">A</span>) : <span style="color: #92a65e; font-weight: bold;">Validated&lt;Nothing</span>, <span style="color: #92a65e; font-weight: bold;">A&gt;</span>()
    <span style="color: #8ac6f2; font-weight: bold;">data</span> <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Invalid&lt;out</span> <span style="color: #92a65e; font-weight: bold;">E&gt;</span>(<span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">e</span>: <span style="color: #92a65e; font-weight: bold;">E</span>) : <span style="color: #92a65e; font-weight: bold;">Validated&lt;E</span>, <span style="color: #92a65e; font-weight: bold;">Nothing&gt;</span>()
}

<span style="color: #8ac6f2; font-weight: bold;">fun</span> <span style="color: #cae682;">parse</span>(string: <span style="color: #92a65e; font-weight: bold;">String</span>): <span style="color: #92a65e; font-weight: bold;">Validated&lt;ErrorType</span>, <span style="color: #92a65e; font-weight: bold;">ValueType&gt;</span> = <span style="color: #92a65e; font-weight: bold;">TODO</span>()
</code></pre>
</div>

<p>
Erlaubt <i>sequentielle</i> und <i>parallele</i> Validierung
</p>
</section>
</section>
<section>
<section id="slide-org549dd1a">
<h2 id="org549dd1a">Typenklassen</h2>
<div class="outline-text-2" id="text-org549dd1a">
</div>
</section>
<section id="slide-org05068c8">
<h3 id="org05068c8">Typenklassen</h3>
<p>
Eine <b>Typenklasse</b> (type class) <code>T a</code> definiert eine Reihe von <b>Funktionen</b> √ºber einen Wert vom Typ <code>a</code>.
</p>

<p>
Typenklassen abstrahieren √ºber <i>ad hoc polymorphism</i>, auch <i>overloading</i>.
</p>
</section>
<section id="slide-org4ec85cf">
<h3 id="org4ec85cf">Beispiele f√ºr Typenklassen</h3>
<p>
Grunds√§tzlich unterscheiden wir
</p>

<ul>
<li>value-Typenklassen:
<ul>
<li><code>Eq</code>, <code>Ord</code>, <code>Num</code>, <code>Show</code>, ‚Ä¶</li>

</ul></li>
<li>type constructor-Typenklassen
<ul>
<li><code>Functor</code>, <code>Monoid</code>, <code>Applicative</code>, <code>Monad</code>, ‚Ä¶</li>

</ul></li>

</ul>
</section>
<section id="slide-orgc60a875">
<h3 id="orgc60a875">Wunschkonzert</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"><code trim>type <span style="color: #8ac6f2; font-weight: bold;">interface</span> <span style="color: #92a65e; font-weight: bold;">Eq&lt;A&gt;</span> {
    <span style="color: #8ac6f2; font-weight: bold;">fun</span> <span style="color: #92a65e; font-weight: bold;">A.eq</span>(b: <span style="color: #92a65e; font-weight: bold;">A</span>): <span style="color: #92a65e; font-weight: bold;">Boolean</span>
}

instance <span style="color: #92a65e; font-weight: bold;">Eq&lt;String&gt;</span> {
    <span style="color: #8ac6f2; font-weight: bold;">override</span> <span style="color: #8ac6f2; font-weight: bold;">fun</span> <span style="color: #92a65e; font-weight: bold;">String.eq</span>(b: <span style="color: #92a65e; font-weight: bold;">String</span>)
      = <span style="color: #8ac6f2; font-weight: bold;">this</span>.toLowerCase() == b.toLowerCase()
}

<span style="color: #8ac6f2; font-weight: bold;">fun</span> &lt;<span style="color: #92a65e; font-weight: bold;">T</span>: <span style="color: #92a65e; font-weight: bold;">Eq&gt;</span> <span style="color: #92a65e; font-weight: bold;">List&lt;T&gt;.filter</span>(like: <span style="color: #92a65e; font-weight: bold;">T</span>): <span style="color: #92a65e; font-weight: bold;">List&lt;T&gt;</span> = <span style="color: #92a65e; font-weight: bold;">TODO</span>()
</code></pre>
</div>
</section>
<section id="slide-orgd88553d">
<h3 id="orgd88553d">Type-Classes f√ºr Werte</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"><code trim><span style="color: #8ac6f2; font-weight: bold;">interface</span> <span style="color: #92a65e; font-weight: bold;">Eqty&lt;A&gt;</span> {
    <span style="color: #8ac6f2; font-weight: bold;">fun</span> <span style="color: #92a65e; font-weight: bold;">A.eq</span>(b: <span style="color: #92a65e; font-weight: bold;">A</span>): <span style="color: #92a65e; font-weight: bold;">Boolean</span>
}

<span style="color: #8ac6f2; font-weight: bold;">object</span> <span style="color: #92a65e; font-weight: bold;">StringEqtyInstance</span> : <span style="color: #92a65e; font-weight: bold;">Eqty&lt;String&gt;</span> {
    <span style="color: #8ac6f2; font-weight: bold;">override</span> <span style="color: #8ac6f2; font-weight: bold;">fun</span> <span style="color: #92a65e; font-weight: bold;">String.eq</span>(b: <span style="color: #92a65e; font-weight: bold;">String</span>): <span style="color: #92a65e; font-weight: bold;">Boolean</span>
            = <span style="color: #8ac6f2; font-weight: bold;">this</span>.toLowerCase() == b.toLowerCase()
}

<span style="color: #8ac6f2; font-weight: bold;">fun</span> &lt;<span style="color: #92a65e; font-weight: bold;">T&gt;</span> <span style="color: #92a65e; font-weight: bold;">List&lt;T&gt;.filter</span>(t: <span style="color: #92a65e; font-weight: bold;">T</span>, eqty: <span style="color: #92a65e; font-weight: bold;">Eqty&lt;T&gt;</span>): <span style="color: #92a65e; font-weight: bold;">List&lt;T&gt;</span>
        = flatMap { eqty.run {
    <span style="color: #8ac6f2; font-weight: bold;">if</span> (it.eq(t)) listOf(it) <span style="color: #8ac6f2; font-weight: bold;">else</span> listOf() }
}

<span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">fooList</span> = listOf(<span style="color: #95e454;">"foo"</span>, <span style="color: #95e454;">"fOo"</span>, <span style="color: #95e454;">"bar"</span>)
         .find(<span style="color: #95e454;">"FOO"</span>, <span style="color: #92a65e; font-weight: bold;">StringEqtyInstance</span>)
<span style="color: #99968b;">// </span><span style="color: #99968b;">["foo", "fOo"]</span>
</code></pre>
</div>
</section>
<section id="slide-org018c2de">
<h3 id="org018c2de">Lauteres Wunschkonzert</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"><code trim>type <span style="color: #8ac6f2; font-weight: bold;">interface</span> <span style="color: #92a65e; font-weight: bold;">Functor&lt;F&gt;</span> {
    <span style="color: #8ac6f2; font-weight: bold;">fun</span> &lt;<span style="color: #92a65e; font-weight: bold;">A</span>, <span style="color: #92a65e; font-weight: bold;">B&gt;</span> <span style="color: #92a65e; font-weight: bold;">F&lt;A&gt;.fmap</span>(f: (<span style="color: #92a65e; font-weight: bold;">A</span>) -&gt; <span style="color: #92a65e; font-weight: bold;">B</span>): <span style="color: #92a65e; font-weight: bold;">F&lt;B&gt;</span>
}

instance <span style="color: #92a65e; font-weight: bold;">Functor&lt;List&gt;</span> {
    <span style="color: #8ac6f2; font-weight: bold;">override</span> <span style="color: #8ac6f2; font-weight: bold;">fun</span> &lt;<span style="color: #92a65e; font-weight: bold;">A</span>, <span style="color: #92a65e; font-weight: bold;">B&gt;</span> <span style="color: #92a65e; font-weight: bold;">List&lt;A&gt;</span>
            .fmap(f: (<span style="color: #92a65e; font-weight: bold;">A</span>) -&gt; <span style="color: #92a65e; font-weight: bold;">B</span>): <span style="color: #92a65e; font-weight: bold;">List&lt;B&gt;</span> = <span style="color: #8ac6f2; font-weight: bold;">this</span>.map(f)
}

<span style="color: #8ac6f2; font-weight: bold;">fun</span> &lt;<span style="color: #92a65e; font-weight: bold;">F&gt;</span> parseInt(intf: <span style="color: #92a65e; font-weight: bold;">F&lt;Int&gt;</span>): <span style="color: #92a65e; font-weight: bold;">F&lt;String&gt;</span> =
    intf.fmap { it.toString() }
</code></pre>
</div>
</section>
<section id="slide-org490a862">
<h3 id="org490a862">Warum kann Kotlin keine Higher-Order Typenklassen haben?</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"><code trim><span style="color: #8ac6f2; font-weight: bold;">fun</span> &lt;<span style="color: #92a65e; font-weight: bold;">A&gt;</span> f(l: <span style="color: #92a65e; font-weight: bold;">List&lt;Maybe&lt;A&gt;&gt;</span>): <span style="color: #92a65e; font-weight: bold;">List&lt;A&gt;</span> <span style="color: #99968b;">// </span><span style="color: #99968b;">valid!</span>
<span style="color: #8ac6f2; font-weight: bold;">fun</span> &lt;<span style="color: #92a65e; font-weight: bold;">A</span>, <span style="color: #92a65e; font-weight: bold;">B&gt;</span> map(l: <span style="color: #92a65e; font-weight: bold;">List&lt;A&gt;</span>, f: (<span style="color: #92a65e; font-weight: bold;">A</span>) -&gt; <span style="color: #92a65e; font-weight: bold;">B</span>): <span style="color: #92a65e; font-weight: bold;">List&lt;B&gt;</span> <span style="color: #99968b;">//</span><span style="color: #99968b;">valid!</span>
</code></pre>
</div>

<ul>
<li>Abstrakter Typ <code>A</code> hat Kind <code>*</code>.</li>
<li>Konkrete Typen <code>List</code> und <code>Maybe</code> haben Kind <code>* ‚Üí *</code> (Type Constructor)</li>

</ul>

</section>
<section id="slide-orgaa16d05">
<h3 id="orgaa16d05">Typenkonstruktoren k√∂nnen nicht generisch sein!</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"><code trim><span style="color: #8ac6f2; font-weight: bold;">fun</span> &lt;<span style="color: #92a65e; font-weight: bold;">F</span>, <span style="color: #92a65e; font-weight: bold;">A</span>, <span style="color: #92a65e; font-weight: bold;">B&gt;</span> map(l: <span style="color: #92a65e; font-weight: bold;">F&lt;A&gt;</span>, f: (<span style="color: #92a65e; font-weight: bold;">A</span>) -&gt; <span style="color: #92a65e; font-weight: bold;">B</span>): <span style="color: #92a65e; font-weight: bold;">F&lt;B&gt;</span> <span style="color: #99968b;">// </span><span style="color: #99968b;">invalid!</span>
</code></pre>
</div>

<ul>
<li>Kotlin Generics <b>m√ºssen</b> von Kind <code>*</code> sein!</li>
<li>Wir k√∂nnen nicht √ºber Typen vom Kind <code>* ‚Üí *</code> abstrahieren!</li>

</ul>
</section>
<section id="slide-org26d63cf">
<h3 id="org26d63cf">L√∂sung: Defunctionalisation!</h3>
<p>
Aus
</p>

<div class="org-src-container">

<pre  class="src src-kotlin"><code trim><span style="color: #92a65e; font-weight: bold;">F&lt;A&gt;</span>
</code></pre>
</div>

<p>
wird
</p>

<div class="org-src-container">

<pre  class="src src-kotlin"><code trim><span style="color: #8ac6f2; font-weight: bold;">interface</span> <span style="color: #92a65e; font-weight: bold;">Kind&lt;out</span> <span style="color: #92a65e; font-weight: bold;">F</span>, <span style="color: #8ac6f2; font-weight: bold;">out</span> <span style="color: #92a65e; font-weight: bold;">A&gt;</span>
</code></pre>
</div>

</section>
<section id="slide-org7a3c203">
<h3 id="org7a3c203">Funktor die Zweite</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"><code trim><span style="color: #8ac6f2; font-weight: bold;">interface</span> <span style="color: #92a65e; font-weight: bold;">Functor&lt;F&gt;</span> {
    <span style="color: #8ac6f2; font-weight: bold;">fun</span> &lt;<span style="color: #92a65e; font-weight: bold;">A</span>, <span style="color: #92a65e; font-weight: bold;">B&gt;</span> <span style="color: #92a65e; font-weight: bold;">F&lt;A&gt;.map</span>(f: (<span style="color: #92a65e; font-weight: bold;">A</span>) -&gt; <span style="color: #92a65e; font-weight: bold;">B</span>): <span style="color: #92a65e; font-weight: bold;">F&lt;B&gt;</span>
}
</code></pre>
</div>

<p>
mit Kind-Proxy:
</p>

<div class="org-src-container">

<pre  class="src src-kotlin"><code trim><span style="color: #8ac6f2; font-weight: bold;">interface</span> <span style="color: #92a65e; font-weight: bold;">Functor&lt;F&gt;</span> {
    <span style="color: #8ac6f2; font-weight: bold;">fun</span> &lt;<span style="color: #92a65e; font-weight: bold;">A</span>, <span style="color: #92a65e; font-weight: bold;">B&gt;</span> <span style="color: #92a65e; font-weight: bold;">Kind&lt;F</span>, <span style="color: #92a65e; font-weight: bold;">A&gt;.map</span>(f: (<span style="color: #92a65e; font-weight: bold;">A</span>) -&gt; <span style="color: #92a65e; font-weight: bold;">B</span>): <span style="color: #92a65e; font-weight: bold;">Kind&lt;F</span>, <span style="color: #92a65e; font-weight: bold;">B&gt;</span>
}
</code></pre>
</div>

</section>
<section id="slide-orgb3961e3">
<h3 id="orgb3961e3">Ein Beispiel</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"><code trim><span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">ForMaybe</span> <span style="color: #8ac6f2; font-weight: bold;">private</span> <span style="color: #8ac6f2; font-weight: bold;">constructor</span>()
<span style="color: #8ac6f2; font-weight: bold;">typealias</span> <span style="color: #92a65e; font-weight: bold;">MaybeOf&lt;T&gt;</span> = <span style="color: #92a65e; font-weight: bold;">Kind&lt;ForMaybe</span>, <span style="color: #92a65e; font-weight: bold;">T&gt;</span>

sealed <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Maybe&lt;out</span> <span style="color: #92a65e; font-weight: bold;">T&gt;</span> {
    <span style="color: #8ac6f2; font-weight: bold;">object</span> <span style="color: #92a65e; font-weight: bold;">No</span>: <span style="color: #92a65e; font-weight: bold;">Maybe&lt;Nothing&gt;</span>()
    <span style="color: #8ac6f2; font-weight: bold;">data</span> <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Yes&lt;T&gt;</span>(<span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">just</span>: <span style="color: #92a65e; font-weight: bold;">T</span>): <span style="color: #92a65e; font-weight: bold;">Maybe&lt;T&gt;</span>()

    <span style="color: #8ac6f2; font-weight: bold;">fun</span> &lt;<span style="color: #92a65e; font-weight: bold;">B&gt;</span> map(f: (<span style="color: #92a65e; font-weight: bold;">T</span>) -&gt; <span style="color: #92a65e; font-weight: bold;">B</span>): <span style="color: #92a65e; font-weight: bold;">MaybeOf&lt;B&gt;</span> = <span style="color: #8ac6f2; font-weight: bold;">when</span> (<span style="color: #8ac6f2; font-weight: bold;">this</span>) {
        <span style="color: #8ac6f2; font-weight: bold;">is</span> <span style="color: #92a65e; font-weight: bold;">No</span> -&gt; <span style="color: #92a65e; font-weight: bold;">No</span>
        <span style="color: #8ac6f2; font-weight: bold;">is</span> <span style="color: #92a65e; font-weight: bold;">Yes</span> -&gt; <span style="color: #92a65e; font-weight: bold;">Yes</span>(f(just))
    }
    <span style="color: #8ac6f2; font-weight: bold;">companion</span> <span style="color: #8ac6f2; font-weight: bold;">object</span>
}

<span style="color: #8ac6f2; font-weight: bold;">fun</span> &lt;<span style="color: #92a65e; font-weight: bold;">A&gt;</span> <span style="color: #92a65e; font-weight: bold;">MaybeOf&lt;A&gt;.fix</span>(): <span style="color: #92a65e; font-weight: bold;">Maybe&lt;A&gt;</span> = <span style="color: #8ac6f2; font-weight: bold;">this</span> <span style="color: #8ac6f2; font-weight: bold;">as</span> <span style="color: #92a65e; font-weight: bold;">Maybe&lt;A&gt;</span> <span style="color: #99968b;">// </span><span style="color: #99968b;">&#128561;</span>
</code></pre>
</div>

</section>
<section id="slide-org6194620">
<h3 id="org6194620">Funktor-Instanz auf Kotlin</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"><code trim><span style="color: #8ac6f2; font-weight: bold;">interface</span> <span style="color: #92a65e; font-weight: bold;">MaybeFunctorInstance</span> : <span style="color: #92a65e; font-weight: bold;">Functor&lt;ForMaybe&gt;</span> {
    <span style="color: #8ac6f2; font-weight: bold;">override</span> <span style="color: #8ac6f2; font-weight: bold;">fun</span> &lt;<span style="color: #92a65e; font-weight: bold;">A</span>, <span style="color: #92a65e; font-weight: bold;">B&gt;</span> <span style="color: #92a65e; font-weight: bold;">Kind&lt;ForMaybe</span>, <span style="color: #92a65e; font-weight: bold;">A&gt;</span>
        .map(f: (<span style="color: #92a65e; font-weight: bold;">A</span>) -&gt; <span style="color: #92a65e; font-weight: bold;">B</span>): <span style="color: #92a65e; font-weight: bold;">Kind&lt;ForMaybe</span>, <span style="color: #92a65e; font-weight: bold;">B&gt;</span> {
        <span style="color: #8ac6f2; font-weight: bold;">return</span> fix().map { f(it) }
    }
}

<span style="color: #8ac6f2; font-weight: bold;">fun</span> <span style="color: #92a65e; font-weight: bold;">Maybe.Companion.functor</span>(): <span style="color: #92a65e; font-weight: bold;">MaybeFunctorInstance</span>
  = <span style="color: #8ac6f2; font-weight: bold;">object</span> : <span style="color: #92a65e; font-weight: bold;">MaybeFunctorInstance</span> { }
</code></pre>
</div>

</section>
<section id="slide-orgb664a38">
<h3 id="orgb664a38">Funktoren in Aktion</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"><code trim><span style="color: #8ac6f2; font-weight: bold;">fun</span> &lt;<span style="color: #92a65e; font-weight: bold;">F&gt;</span> incrementAll(
   f: <span style="color: #92a65e; font-weight: bold;">Functor&lt;F&gt;</span>,
   a: <span style="color: #92a65e; font-weight: bold;">Kind&lt;F</span>, <span style="color: #92a65e; font-weight: bold;">Int&gt;</span>
): <span style="color: #92a65e; font-weight: bold;">Kind&lt;F</span>, <span style="color: #92a65e; font-weight: bold;">Int&gt;</span> = f.run { a.map { it + 1 } }

incrementAll(<span style="color: #92a65e; font-weight: bold;">Maybe.functor</span>(), <span style="color: #92a65e; font-weight: bold;">Maybe.Yes</span>(1)).fix() <span style="color: #99968b;">// </span><span style="color: #99968b;">just 2</span>
incrementAll(<span style="color: #92a65e; font-weight: bold;">Maybe.functor</span>(), <span style="color: #92a65e; font-weight: bold;">Maybe.No</span>).fix() <span style="color: #99968b;">// </span><span style="color: #99968b;">No</span>
</code></pre>
</div>
</section>
<section id="slide-org3868c8e">
<h3 id="org3868c8e">Œõrrow Sugar</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"><code trim>@higherkind
sealed <span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Maybe&lt;out</span> <span style="color: #92a65e; font-weight: bold;">T&gt;</span> : <span style="color: #92a65e; font-weight: bold;">MaybeOf&lt;T&gt;</span> {
        <span style="color: #99968b;">// </span><span style="color: #99968b;">...</span>
}
</code></pre>
</div>

<p>
Und in einem anderen Projekt:
</p>

<div class="org-src-container">

<pre  class="src src-kotlin"><code trim>@extension
<span style="color: #8ac6f2; font-weight: bold;">interface</span> <span style="color: #92a65e; font-weight: bold;">MaybeFunctorInstance</span> : <span style="color: #92a65e; font-weight: bold;">Functor&lt;ForMaybe&gt;</span> {
    <span style="color: #8ac6f2; font-weight: bold;">override</span> <span style="color: #8ac6f2; font-weight: bold;">fun</span> <span style="color: #99968b;">// </span><span style="color: #99968b;">...</span>
}

<span style="color: #8ac6f2; font-weight: bold;">val</span> <span style="color: #cae682;">foo</span> = incrementAll(<span style="color: #92a65e; font-weight: bold;">Maybe.functor</span>(), <span style="color: #99968b;">/* </span><span style="color: #99968b;">... */</span>)
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orgee4c6a2">
<h2 id="orgee4c6a2">Live Coding</h2>
<p>
Kontext: ich m√∂chte eine LP (<code>Record</code>) mit Genres versehen k√∂nnen (<code>Tag</code>)
</p>

<ul>
<li>precondition: <code>Record</code>-ID und eine Liste an Strings, die ein Genre bezeichnen</li>

</ul>

</section>
<section id="slide-org1210ba4">
<h3 id="org1210ba4">Anforderungen</h3>
<ul>
<li>nicht bereits Existierende Tags sollen neu angelegt werden</li>
<li>bereits existierende Tags sollen wiederverwendet werden</li>
<li>die LP soll allen angegegeben Tags nach Namen zugeordnet werden</li>

</ul>

</section>
<section id="slide-orgede4ac5">
<h3 id="orgede4ac5">Beispiel</h3>

<div class="figure">
<p><img src="./thewall.jpg" alt="thewall.jpg" />
</p>
</div>

<ul>
<li>progressive rock</li>
<li>classic rock (exists)</li>
<li>psychedelic rock</li>
<li>rock (exists)</li>

</ul>
</section>
</section>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/reveal.js@3.8.0/js/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js@3.8.0/lib/js/classList.js', condition: function() { return !document.body.classList; } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js@3.8.0/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js@3.8.0/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js@3.8.0/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js@3.8.0/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }]
});
</script>
</body>
</html>
